{% extends "base.html" %}

{% block title %}Panel Administratora - Typowanie Meczów{% endblock %}

{% block content %}
<h1>Panel Administratora</h1>

<div class="admin-section">
    <h2>Dodaj nowy mecz</h2>
    <div class="card">
        <form method="POST" action="{{ url_for('add_match') }}">
            <div class="form-group">
                <label for="home_team">Gospodarze:</label>
                <input type="text" id="home_team" name="home_team" required>
            </div>
            <div class="form-group">
                <label for="away_team">Goście:</label>
                <input type="text" id="away_team" name="away_team" required>
            </div>
            <div class="form-group">
                <label for="match_date">Data i godzina (YYYY-MM-DDTHH:MM:SS):</label>
                <input type="datetime-local" id="match_date" name="match_date" required>
            </div>
            <button type="submit" class="btn btn-primary">Dodaj mecz</button>
        </form>
    </div>
</div>

<div class="admin-section">
    <h2>Wszystkie mecze - Ustaw wyniki</h2>
    
    {% if matches %}
        <div class="admin-matches-table">
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Gospodarze</th>
                        <th>Goście</th>
                        <th>Wynik</th>
                        <th>Ustaw wynik</th>
                    </tr>
                </thead>
                <tbody>
                    {% for match in matches %}
                    <tr>
                        <td>{{ match.match_date.replace('T', ' ')[:16] }}</td>
                        <td><strong>{{ match.home_team }}</strong></td>
                        <td><strong>{{ match.away_team }}</strong></td>
                        <td>
                            {% if match.home_score is not none %}
                                {{ match.home_score }} : {{ match.away_score }}
                            {% else %}
                                <span class="pending">- : -</span>
                            {% endif %}
                        </td>
                        <td>
                            <form method="POST" action="{{ url_for('set_result', match_id=match.id) }}" class="inline-form">
                                <div class="result-inputs">
                                    <input type="number" name="home_score" 
                                           value="{{ match.home_score if match.home_score is not none else '' }}" 
                                           min="0" required class="score-input">
                                    <span>:</span>
                                    <input type="number" name="away_score" 
                                           value="{{ match.away_score if match.away_score is not none else '' }}" 
                                           min="0" required class="score-input">
                                </div>
                                <button type="submit" class="btn btn-small">
                                    {% if match.home_score is not none %}Aktualizuj{% else %}Ustaw{% endif %}
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>Brak meczów w bazie.</p>
    {% endif %}
</div>
{% endblock %}







